<!-- Contenedor general -->
<div class="row justify-content-center w-100">

    <!-- Titulo -->
    <div class="col-lg-12 d-flex flex-row">
        <i class="fas fa-angle-double-right fa-sm blue" style="position: relative; top: 10px; margin-right: 3px;"></i>
        <p class="mb-md-0 font-weight-bold justify-content-start blue w-100">Propiedades</p>
    </div>

    <!-- Filtros de búsqueda -->
    <div class="row w-100 mt-0 justify-content-center">

        <div *ngIf="this.mostrarPanelAdmin" class="d-flex w-100">

            <div class="col-lg-12">

                <form id="formBusquedaAdmin" [formGroup]="this.formBusquedaAdm" class="form-inline" method="post" style="width: 100% !important;">

                    <div class="d-flex justify-content-center row-container-busqueda" style="width: 100% !important;">
                        <div class="m-0 col-Busqueda">
                            <label class="text-black">Cliente</label>
                            <input id="txtClienteBusquedaAdm"
                                type="text" 
                                class="form-control form-control-sm w-100" 
                                placeholder="Cliente"
                                formControlName="cliente">
                        </div>
                        <div class="m-0 col-Busqueda">
                            <label class="text-black">Título</label>
                            <input id="txtTituloAdm" 
                                type="text" 
                                class="form-control form-control-sm w-100"
                                placeholder="Título"
                                formControlName="titulo">
                        </div>
                        <div class="m-0 col-Busqueda">
                            <label class="text-black">Fotografias</label>
                            <select id="ddlFotografiasBusquedaAdm" 
                                class="form-control form-control-sm form-control-ddl-sm w-100"
                                formControlName="conFotos">
                                <option value="true">Propiedades con fotografías</option>
                                <option value="false">Propiedades sin fotografías</option>
                            </select>
                        </div>
                        <div class="m-0 col-Busqueda-buttons">
                            <label class="text-black textAuxSpacing">&nbsp;</label>
                            <div class="flex-row" style=" display: flex !important;">
                                <button id="btnBuscar" type="submit" class="btn btn-sm btn-sm-custom" (click)="this.buscarClick()">Buscar</button>
                                <a class="btn btn-sm btn-sm-custom btn-warning" (click)="this.crearClick()">Crear</a>
                            </div>

                        </div>

                    </div>

                </form>

            </div>
      


        </div>

        <div *ngIf="!this.mostrarPanelAdmin" class="d-flex w-100">

            <div class="col-lg-12">

                <form id="formBusquedaProp" [formGroup]="this.formBusquedaProp" class="form-inline" method="post" style="width: 100% !important;">

                    <div class="d-flex justify-content-center row-container-busqueda" style="width: 100% !important;">
                        <div class="m-0 col-Busqueda">
                            <label class="text-black">Título</label>
                            <input id="txtTitulo"
                                type="text" 
                                class="form-control form-control-sm w-100" 
                                placeholder="Título"
                                formControlName="titulo">
                        </div>
                        <div class="m-0 col-Busqueda">
                            <label class="text-black">Fotografías</label>
                            <select id="ddlFotografiasBusqueda" 
                                class="form-control form-control-sm form-control-ddl-sm w-100"
                                formControlName="conFotos">
                                <option value="true">Propiedades con fotografías</option>
                                <option value="false">Propiedades sin fotografías</option>
                            </select>
                        </div>
                        <div class="m-0 col-Busqueda-buttons">
                            <label class="text-black textAuxSpacing">&nbsp;</label>
                            <div class="flex-row" style=" display: flex !important;">
                                <button id="btnBuscar" type="submit" class="btn btn-sm btn-sm-custom" (click)="this.buscarClick()">Buscar</button>
                                <a class="btn btn-sm btn-sm-custom btn-warning" (click)="this.crearClick()">Crear</a>
                            </div>

                        </div>

                    </div>

                </form>

            </div>
        
        </div>

    </div>

     <!-- Grid principal -->
     <div class="row w-100 justify-content-center p-0">

        <div id="rowLoading" class="w-100" *ngIf="this.cargando">
            <img alt="Enviando ..." src="assets/images/loadings/loading1-16x16.gif" style="display: inline;" />
            <p id="textInfoEnvio" style="display: inline;" class="ml-2">Actualizando...</p>
        </div>
    
        <div id="gridBusquedaContainer" class="card w-100 ml-0 mt-2 p-0 flex-xl-shrink-1">
            
            <div *ngFor="let prop of this.propiedades" 
                class="card-body ml-0 contenedorRowFlex border-grey" 
                style="@cssLastRow">

                <div class="d-flex flex-row customFlex-100 pb-0 contenedorRowFlex" style="border-bottom: 0px !important;">
    
                    <!-- <input id="_prop_@aux_currentRow" type="hidden" name="name" value="@p.IdPropiedad" />
                    <input type="hidden" id="textoProp_@aux_currentRow" value="@p.Titulo" /> -->

                    <div class="p-1 celda" style="flex-basis: 20%;" *ngIf="this.mostrarPanelAdmin">
                        <p class=" celda-Texto text-muted font-weight-bold small">Cliente</p>
                        <div class="p-0 celda-Contenido">
                            <p class="text-muted small">{{prop.cliente}}</p>
                        </div>
                    </div>

                    <div class="p-1 celda" style="flex-basis: 10%;">
                        <p class="celda-Texto text-muted font-weight-bold small ">Código</p>
                        <div class="p-0 celda-Contenido">
                            <p id="_propiedad_@aux_currentRow" class="text-muted small pr-1" style="word-break: break-all !important;">{{prop.id}}</p>
                        </div>
                    </div>
                    <div class="p-1 celda" style="flex-basis: 40%;">
                        <p class="celda-Texto text-muted font-weight-bold small">Título</p>
                        <div class="p-0 celda-Contenido">
                            <p class="text-muted small">{{prop.titulo}}</p>
                        </div>
                    </div>
                    <div class="p-1 celda" style="flex-basis: 20%;">
                        <p class="celda-Texto text-muted font-weight-bold small">Estado</p>
                        <div class="p-0 celda-Contenido">
                            <p class="text-muted small">{{prop.estado}}</p>
                        </div>
                    </div>
                    <div class="p-1 celda" style="flex-basis: 10%;">
                        <p class="celda-Texto text-muted font-weight-bold small">Fotos</p>
                        <div class="p-0 celda-Contenido">
                            <p class="text-muted small" *ngIf="prop.fotos > 0">{{prop.fotos}}</p>
                            <p class="text-muted small red" *ngIf="prop.fotos === 0">{{prop.fotos}}</p>
                        </div>
                    </div>
                    <div class="p-1 celda" style="flex-basis: 10%;">
                        <p class="celda-Texto text-muted font-weight-bold small">Vistas</p>
                        <div class="p-0 celda-Contenido">
                            <p class="text-muted small">{{prop.vistas}}</p>
                        </div>
                    </div>
                    <div class="p-1 celda" style="flex-basis: 18%; min-width: 18%;">
                        <p class="celda-Texto text-muted font-weight-bold small">Opciones</p>
                        <div class="p-0 d-flex flex-row celda-Contenido rounded-buttons-icons">
                            
                            <!--
                            ESTADO 2: Disponible, ESTADO 4: Suspendida *@
                            @if ((p.IdEstado == 1 && p.CountFotos > 0) || (p.IdEstado == 4 && p.CountFotos > 0))
                            {-->
                                <a title="Publicar esta propiedad"
                                    *ngIf="(prop.codEstado === 1 && prop.fotos > 0) || (prop.codEstado === 4 && prop.fotos > 0)"><i class="far fa-share-square fa-sm"></i></a>
                            <!--}
                            *@-->
    
                            <!--
                            @* ESTADO 3: Publicado *@
                            @*
                            @if (p.IdEstado == 3)
                            {-->
                                <a title="Suspender esta propiedad" *ngIf="(prop.codEstado === 3)"><i class="fas fa-ban fa-sm"></i></a>
                            <!--}-->
    
                            <a title="Ver el detalle de esta propiedad"><i class="fas fa-info fa-sm"></i></a>
                            
                            <a title="Editar fotos 360" (click)="this.editarFoto(prop.idx)"><i class="far fa-images fa-sm"></i></a>


                            <!--
                            @*
                            <a title="Editar esta propiedad" asp-controller="propiedades" asp-action="EditarPropiedad" asp-route-codigo="@p.IdPropiedad"><i class="fas fa-pencil-alt fa-sm"></i></a>
                            *@  -->
                            <a title="Eliminar este propiedad"><i class="fas fa-times fa-sm"></i></a>
                        </div>
                    </div>
    
                </div>
    
            </div>



        </div>

        <div class="d-flex p-1 m-1 justify-content-center" *ngIf="this.textoRespuestaBusqueda.length > 0">
            {{this.textoRespuestaBusqueda}}
        </div>
    </div>
</div>